<!doctype html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Camera Test</title>
<style>
  html,body{height:100%;margin:0} body{display:flex;flex-direction:column;gap:8px;align-items:center;justify-content:center;background:#111;color:#fff;font-family:system-ui;}
  video{width:90vw;height:auto;background:#000;border:1px solid #333}
  #err{max-width:90vw;white-space:pre-wrap;background:#900;padding:8px;border-radius:6px;display:none}
  button{font-size:18px;padding:12px 20px;border-radius:10px}
</style>
<h1>Camera Test</h1>
<div id="err"></div>
<video id="v" playsinline autoplay muted></video>
<div>
  <button onclick="startCam('environment')">Start (Back)</button>
  <button onclick="startCam('user')">Start (Front)</button>
</div>
<script>
const v = document.getElementById('v'); const errEl=document.getElementById('err');
function showErr(e){ errEl.style.display='block'; errEl.textContent = 'ERROR: ' + (e?.message||e); }
async function startCam(which){
  try{
    errEl.style.display='none';
    if(v.srcObject) v.srcObject.getTracks().forEach(t=>t.stop());
    const stream = await navigator.mediaDevices.getUserMedia({video:{facingMode: which}, audio:false});
    v.srcObject = stream;
  }catch(e){
    showErr(e);
  }
}
</script>
